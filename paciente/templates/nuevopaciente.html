{% extends 'base.html' %}
{% load static %}
{% load bootstrap4 %}
{# CSS Bootstrap #}
{% bootstrap_css %}
{% block extrahead %}
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" type="image/png" href="{% static 'nuevomedico/images/icons/favicon.ico' %}"/>
	<link rel="stylesheet" type="text/css" href="{% static 'nuevomedico/vendor/bootstrap/css/bootstrap.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'nuevomedico/fonts/font-awesome-4.7.0/css/font-awesome.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'nuevomedico/vendor/animate/animate.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'nuevomedico/vendor/css-hamburgers/hamburgers.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'nuevomedico/vendor/animsition/css/animsition.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'nuevomedico/vendor/select2/select2.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'nuevomedico/vendor/daterangepicker/daterangepicker.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'nuevomedico/css/util.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'nuevomedico/css/main.css' %}">
{% endblock extrahead %}
{% block titulo %}Nuevo Paciente{% endblock titulo %}
{% block h1 %}Nuevo Paciente{% endblock h1 %}
{% block cuerpo %}
<form method="post">
    {% csrf_token %}
	<div class="container-contact100">

		<div class="wrap-contact100">
			<form class="contact100-form validate-form">
				<div align="center"><strong>Lugar Atenci&oacute;n</strong></div>
				<div class="wrap-input100 validate-input" data-validate="Please enter your name">
					<span class="focus-input100"></span>
					{{form.lugarAtencion}}
				</div>

				<div class="wrap-input100 validate-input" data-validate="Please enter your name">
					<span class="focus-input100"></span>
					{{form.rut}}
				</div>

				<div class="wrap-input100 validate-input" data-validate = "Please enter your phone">
					{{form.pnombre}}
					<span class="focus-input100"></span>
				</div>

				<div class="wrap-input100 validate-input" data-validate = "Please enter your message">
					{{form.snombre}}
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input" data-validate = "Please enter your message">
					{{form.papellido}}
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input" data-validate = "Please enter your message">
					{{form.sapellido}}
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input" data-validate = "Please enter your message">
					{{form.Direccion}}
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 validate-input" data-validate = "Please enter your message">
					{{form.especialidad}}
					<span class="focus-input100"></span>
				</div>
				<div align="center"><strong>Fecha de Nacimiento</strong></div>
                <div class="wrap-input100 validate-input" data-validate = "Please enter your message">
					{{form.fecha_nacimiento}}
					<span class="focus-input100"></span>
				</div>
				<div class="container-contact100-form-btn">
					<button class="contact100-form-btn" type="submit">
						<span>
							Guardar
						</span>
					</button>
				</div>
			</form>
		</div>
	</div>
</form>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-23581568-13');

    document.getElementById('id_lugarAtencion').setAttribute("class", "input100")
	document.getElementById('id_lugarAtencion').setAttribute("style", "height: 60px;")
	document.getElementById('id_lugarAtencion').setAttribute("placeholder", "Lugar de atencion")

	document.getElementById('id_rut').setAttribute("class", "input100")
	document.getElementById('id_rut').setAttribute("placeholder", "RUT")
	document.getElementById('id_rut').setAttribute("oninput", "checkRut(this)")
	document.getElementById('id_rut').setAttribute("maxlength", "10")

	document.getElementById('id_pnombre').setAttribute("class", "input100")
	document.getElementById('id_pnombre').setAttribute("placeholder", "Primer Nombre")

	document.getElementById('id_snombre').setAttribute("class", "input100")
	document.getElementById('id_snombre').setAttribute("placeholder", "Segundo Nombre")

	document.getElementById('id_papellido').setAttribute("class", "input100")
	document.getElementById('id_papellido').setAttribute("placeholder", "Primer Apellido")

	document.getElementById('id_sapellido').setAttribute("class", "input100")
	document.getElementById('id_sapellido').setAttribute("placeholder", "Segundo Apellido")

	document.getElementById('id_Direccion').setAttribute("class", "input100")
	document.getElementById('id_Direccion').setAttribute("placeholder", "Dirección")

    document.getElementById('id_fecha_nacimiento').setAttribute("class", "input100")
	document.getElementById('id_fecha_nacimiento').setAttribute("placeholder", "Fecha nacimiento")
	document.getElementById('id_fecha_nacimiento').setAttribute("type", "date")

function checkRut(rut){
    // Despejar Puntos
    var valor = rut.value.replace('.','');
    // Despejar Guión
    valor = valor.replace('-','');
    cuerpo = valor.slice(0,-1);
    dv = valor.slice(-1).toUpperCase();
    // Formatear RUN
    rut.value = cuerpo + '-'+ dv
    if(cuerpo.length < 7) { rut.setCustomValidity("RUT Incompleto"); return false;}
    suma = 0;
    multiplo = 2;
    
    // Para cada dígito del Cuerpo
    for(i=1;i<=cuerpo.length;i++) {
        index = multiplo * valor.charAt(cuerpo.length - i);
        suma = suma + index;
        if(multiplo < 7) { multiplo = multiplo + 1; } else { multiplo = 2; }
    }
    dvEsperado = 11 - (suma % 11);

    dv = (dv == 'K')?10:dv;
    dv = (dv == 0)?11:dv;

    if(dvEsperado != dv) { 
        rut.setCustomValidity("RUT Inválido"); 
        return false; 
    }else{
        rut.setCustomValidity('');
    }
}
</script>
</body>
</html>
{% endblock cuerpo %}